<div [ngClass]="['navbar', 'container', 'fw', 'short', 'spotify', (searchActive == true) ? 'search-active' : '']">
    <a href="/">Playlist Generator</a>
</div>
<div [ngClass]="['container', 'fw', 'short', 'center',(searchActive == true) ? 'white-bg' : '']">
  <div [ngClass]="['search', (searchActive == true) ? 'search-active' : '']">
    <mat-icon (click)="searchActive = true" *ngIf="!searchActive">search</mat-icon>
    <mat-icon (click)="searchActive = false" *ngIf="searchActive">close</mat-icon>
    <mat-form-field>
      <input (click)="clickedInside($event)" [(ngModel)]='searchTerm' (ngModelChange)='changed($event)' matInput placeholder="Search">
    </mat-form-field>
  </div>
</div>
<div [ngClass]="['container', 'fw', 'halves',(searchActive == true ? 'hidden' : '')]">
  <div class="half">
    <h3 class="header">Additions</h3>
    <div *ngFor="let o of generateSelectedParameters(parameters.additions)" [ngClass]="['parameter-results', (parameters.additions[o.key].shown == true ? '' : 'closed')]">
      <h2 (click)="parameters.additions[o.key].shown = !parameters.additions[o.key].shown">{{getTitle(o.key)}} ({{o.value.items.length}})</h2>
      <mat-card *ngFor="let a of o.value.items" class="result">
        <img *ngIf="a.image != '' && a.image != null" mat-card-image [src]="a.image" alt="{{a.name}}">
        <mat-card-content>
          <mat-card-title>{{a.name}}</mat-card-title>
          <mat-card-subtitle>{{a.type}}</mat-card-subtitle>
        </mat-card-content>
        <mat-card-actions>
          <button *ngIf="a.type != 'track'" (click)="openAdvancedoptions(a)" mat-button><mat-icon>settings</mat-icon></button>
          <button (click)="removeFromPlaylist(a, 'additions')" mat-button><mat-icon>delete</mat-icon></button>
      </mat-card-actions>
      </mat-card>
    </div>
  </div>
  <div class="half">
    <h3 class="header inverse">Exclusions</h3>
    <div *ngFor="let o of generateSelectedParameters(parameters.exclusions)" [ngClass]="['parameter-results', (parameters.exclusions[o.key].shown == true ? '' : 'closed')]">
      <h2 (click)="parameters.exclusions[o.key].shown = !parameters.exclusions[o.key].shown">{{getTitle(o.key)}} ({{o.value.items.length}})</h2>
      <mat-card *ngFor="let a of o.value.items" class="result">
        <img *ngIf="a.image != '' && a.image != null" mat-card-image [src]="a.image" alt="{{a.name}}">
        <mat-card-content>
          <mat-card-title>{{a.name}}</mat-card-title>
          <mat-card-subtitle>{{a.type}}</mat-card-subtitle>
        </mat-card-content>
        <mat-card-actions>
          <button *ngIf="a.type != 'track'" (click)="openAdvancedoptions(a)" mat-button><mat-icon>settings</mat-icon></button>
          <button (click)="removeFromPlaylist(a, 'exclusions')" mat-button><mat-icon>delete</mat-icon></button>
      </mat-card-actions>
      </mat-card>
    </div>
  </div>
</div>
<div class="cotnainer fw">
  <h3 class="header blue">Settings</h3>
  <div class="center">
    <button color="primary"  mat-raised-button>Generate Playlist</button>
  </div>
</div>
<div *ngIf="searchActive" (click)="clickedInside($event)" class="container search-results-wrapper">
  <h3 *ngIf="searchTerm == undefined || searchTerm == ''">Start typing to begin your search</h3>
  <h3 *ngIf="searchTerm != undefined && searchTerm != ''">Showing search results for {{searchTerm}}</h3>
  <div *ngIf="searchTerm != undefined && searchTerm != ''" class="search-results">
    <div *ngIf="searchLoading" class="loader"></div>
    <mat-card *ngFor="let s of searchResults" class="result">
      <img *ngIf="s.image != '' && s.image != null" mat-card-image [src]="s.image" alt="{{s.name}}">
      <mat-card-content>
        <mat-card-title>{{s.name}}</mat-card-title>
        <mat-card-subtitle>{{s.type}}</mat-card-subtitle>
      </mat-card-content>
      <mat-card-actions>
        <button *ngIf="!alreadyExists(s)" (click)="addToAdditions(s)" mat-button><mat-icon>add</mat-icon></button>
        <button *ngIf="s.type != 'track'" (click)="openAdvancedoptions(s)" mat-button><mat-icon>settings</mat-icon></button>
        <button *ngIf="!alreadyExists(s)" (click)="addToExclusions(s)" mat-button><mat-icon>not_interested</mat-icon></button>
        <button *ngIf="alreadyExists(s)" (click)="removeFromPlaylist(s)" mat-button><mat-icon>delete</mat-icon></button>
      </mat-card-actions>
    </mat-card>
  </div>
</div>